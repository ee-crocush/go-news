# Новостной агрегатор

## Зачем?

Ответ на этот вопрос простой - здесь я учусь применять технологии

## Обзор проекта

Новостной агрегатор - это демонстрационное распределенное приложение, построенное на микросервисной архитектуре с 
применением принципов Domain-Driven Design (DDD). Система предназначена для сбора, обработки и предоставления 
новостного контента с возможностью комментирования

## Архитектура системы

Приложение состоит из frontend-части и трех основных backend-сервисов, каждый из которых отвечает за определенную 
функциональную область

![схема.drawio.png](doc/%D1%81%D1%85%D0%B5%D0%BC%D0%B0.drawio.png)

### Frontend (Vue.js + Nginx)
**Назначение:** Пользовательский интерфейс приложения
- **Vue.js приложение:** SPA (Single Page Application) для отображения новостей и взаимодействия с пользователем
- **Nginx:** Веб-сервер для обслуживания статических файлов
- Интерактивный интерфейс для чтения новостей и комментирования
- Система фильтрации и поиска новостей (корректировка)

### API Gateway
**Назначение:** Единая точка входа для всех клиентских запросов
- Маршрутизация запросов к соответствующим микросервисам
- Агрегация ответов от различных сервисов
- Кэширование часто запрашиваемых данных
- Rate limiting и защита от DDoS-атак

### go-news
**Назначение:** Основной сервис управления новостным контентом
- Сбор новостей из различных источников (RSS)
- Обработка и нормализация новостных данных

### go-comments
**Назначение:** Сервис для работы с пользовательскими комментариями
- Создание комментариев
- Система модерации комментариев
- Поддержка вложенных комментариев (древовидная структура)

### go-moderation
**Назначение:** Сервис модерации комментариев
- Модерация комментариев на запрещенные слова (упрощенная реализация)

## Технический стек

**Backend:**
- **Язык программирования:** Go (Golang)
- **Архитектурный подход:** Domain-Driven Design (DDD)
- **Паттерн архитектуры:** Микросервисы
- **Коммуникация между сервисами:** HTTP, Apache Kafka
- **База данных:** PostgreSQL, MongoDB
- **Очереди сообщений:** Apache Kafka

**Frontend:**
- **Фреймворк:** Vue.js 3
- **Веб-сервер:** Nginx
- **Сборщик:** Vite/Webpack
- **UI библиотеки:** Vuetify

**DevOps:**
- **Контейнеризация:** Docker
- **Reverse Proxy:** Nginx (для статики и проксирования API запросов)

## Инструкции по запуску

В каждом сервисе, включая kafka, postgres и mongo, приведены примеры `.env` для локального запуска 
(`.env.example.local`) и через docker (`.env.example`)

### Docker запуск

1. **Клонирование репозитория:** `git clone https://github.com/ee-crocush/go-news`
2. **Переходим в папку проекта:** `cd go-news`
3. **Сборка проекта:** `make build`
4. **Запуск:** 
```
make up
make restart-consumers
``` 
После запуска необходимо перезагрузить consumers, т.к. consumers не успевают подключиться к Kafka

### Локальный запуск

1. **Клонирование репозитория:** `git clone https://github.com/ee-crocush/go-news`
2. **Переходим в папку проекта:** `cd go-news`
4. **Запуск Kafka, Postgres, Mongo:**
```
docker compose -f docker-compose.local.yaml -d
``` 
5. **Запуск сервисов:** Переходим в директорию каждого сервиса и запускаем `go run ./cmd/main.go`

## Информация по сервисам <!-- services-info -->

Подробная информация по сервисам:
 - Клиентское приложение - [frontend](frontend/readme.md)
 - Сервис маршрутизации - [api-gateway](api-gateway/readme.md)
 - Сервис комментариев - [go-comments](go-comments/readme.md)
 - Сервис новостной агрегатор - [go-news](go-news/readme.md)
 - Сервис модерации - [go-moderation](go-moderation/readme.md)
 - Общие компоненты - [pkg](pkg/readme.md)


## Roadmap

Общий Roadmap доступен по [ссылке](roadmap.md)

По каждому сервису смотрим блок [Информация по сервисам](#services-info)
